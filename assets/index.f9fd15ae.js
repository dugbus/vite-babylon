import{b as n}from"./vendor.64115eaa.js";const M=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const t of o)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function l(o){const t={};return o.integrity&&(t.integrity=o.integrity),o.referrerpolicy&&(t.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?t.credentials="include":o.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function c(o){if(o.ep)return;o.ep=!0;const t=l(o);fetch(o.href,t)}};M();const N=(e,a)=>Math.floor(Math.random()*(a-e))+e;function b(e,a,l,c){new BABYLON.Texture(e,a,!0,!0,BABYLON.Texture.NEAREST_SAMPLINGMODE).onLoadObservable.add(t=>{const i=t.getSize().width,r=t.getSize().height;console.log(i,r);const s=i*r,u=t.readPixels(),B=BABYLON.MeshBuilder.CreateBox("basebox",{size:l},a);B.registerInstancedBuffer("color",4),B.instancedBuffers.color=new BABYLON.Color4(1,0,0,1);for(let f=0;f<s;f++){const v=f%i,g=Math.floor(f/i),h=(g*i+v)*4;if(u[h+3]===0)continue;const p=B.createInstance(`box${f}`),w=i*1.1/2,L=r*1.1/2;p.position.x=(v*1.1-w)*l,p.position.y=(g*1.1-L)*l,p.position.z=c,p.velocity=N(1,15),p.metadata=`box${f}`,B.instancedBuffers.color=new BABYLON.Color4(u[h]/255,u[h+1]/255,u[h+2]/255,1)}})}function T(e){[{radius:10,texture:"tunner.png",uScale:3,vScale:100},{radius:100,texture:"tripout.png",uScale:3,vScale:100}].forEach(({radius:a,texture:l,uScale:c,vScale:o})=>{const t=[];for(let s=-1e3;s<1e4;s+=100)t.push(new BABYLON.Vector3(0,0,s));const i=BABYLON.MeshBuilder.CreateTube("tunnel",{path:t,radius:a,tessellation:50,sideOrientation:BABYLON.Mesh.DOUBLESIDE,updatable:!0},e),r=new BABYLON.StandardMaterial(l,e);r.diffuseTexture=new BABYLON.Texture(l,e),r.diffuseTexture.hasAlpha=!0,r.emissiveColor=new BABYLON.Color3(0,0,0),r.specularColor=new BABYLON.Color3(0,0,0),r.diffuseTexture.uScale=c,r.diffuseTexture.vScale=o,i.material=r,i.position.x=0,i.position.y=0,i.position.z=0})}const C=document.getElementById("renderCanvas"),y=new n.exports.Engine(C,!0),m=(e,a)=>Math.floor(Math.random()*(a-e))+e;let d=[];const z=function(){var e=new n.exports.Scene(y);e.clearColor=new n.exports.Color4(0,0,0,1);var a=new n.exports.UniversalCamera("Camera",n.exports.Vector3.Zero(),e);a.attachControl(C,!0),e.activeCamera.position.x=0,e.activeCamera.position.y=0,e.activeCamera.position.z=0;var l=n.exports.Mesh.CreateBox("skyBox",100,e),c=new n.exports.StandardMaterial("skyBox",e);c.backFaceCulling=!1,c.reflectionTexture=new n.exports.CubeTexture("/skybox.png",e),c.reflectionTexture.coordinatesMode=n.exports.Texture.SKYBOX_MODE,c.diffuseColor=new n.exports.Color3(0,0,0),c.specularColor=new n.exports.Color3(0,0,0),c.disableLighting=!0,l.material=c,b("sonic.png",e,.2,500),b("score.png",e,.2,300),T(e);const o=n.exports.BoxBuilder.CreateBox("box",{size:1},e),t=new n.exports.StandardMaterial("white",e);t.diffuseColor=n.exports.Color3.White(),o.material=t,o.registerInstancedBuffer("color",4),o.instancedBuffers.color=new n.exports.Color4(1,0,0,1),e.createDefaultLight();var i=0;for(let r=0;r<i;r++){const s=o.createInstance("box"+r);d.push(s),s.position.x=m(-20,20),s.position.y=m(-20,20),s.position.z=m(0,100),s.velocity=m(1,15),s.metadata="box"+r,o.instancedBuffers.color=new n.exports.Color4(1,Math.random(),Math.random(),1)}return e.onPointerObservable.add(r=>{switch(r.type){case n.exports.PointerEventTypes.POINTERDOWN:var s=r.pickInfo;if(s.hit){var u=s.pickedMesh;u&&(u.position.z=u.position.z+10)}break;case n.exports.PointerEventTypes.POINTERPICK:break}}),e.debugLayer.show({embedMode:!0}),e.createDefaultXRExperienceAsync(),e},O=z(),x={velocity:0,acceleration:.01};y.runRenderLoop(function(){x.velocity+=x.acceleration,x.velocity>1&&(x.velocity=1),O.activeCamera.position.z+=x.velocity;for(var e=0;e<d.length;e++)d[e].position.z=d[e].position.z-d[e].velocity/100,d[e].position.z<-50&&(d[e].position.z=200);O.render()});window.addEventListener("resize",function(){y.resize()});
